<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A personal webpage to document my projects, thoughts, and experiences.">
	<meta name="author" content="Hieu Minh Nguyen">
	<title>afternoon-cape</title>
	<link rel="icon" type="image/x-icon" href="favicon.ico">
	<link href='http://fonts.googleapis.com/css?family=Inconsolata|Open+Sans:600,800,400' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="http://niftyhedgehog.com/bootstrap-3.3.2-dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://niftyhedgehog.com/bootstrap-3.3.2-dist/css/bootstrap-theme.min.css">
	<link rel="stylesheet" type="text/css" href="http://niftyhedgehog.com/stylesheets/main.css">
	<svg display="none" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	<defs>
	<symbol id="icon-wondering" viewBox="0 0 1024 1024">
		<title>wondering</title>
		<path class="path1" d="M512 1024c282.77 0 512-229.23 512-512s-229.23-512-512-512-512 229.23-512 512 229.23 512 512 512zM512 96c229.75 0 416 186.25 416 416s-186.25 416-416 416-416-186.25-416-416 186.25-416 416-416zM745.74 601.62l22.488 76.776-437.008 128.002-22.488-76.776zM256 320c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64s-64-28.654-64-64zM640 320c0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64s-64-28.654-64-64z"></path>
	</symbol>
	<symbol id="icon-terminal" viewBox="0 0 1024 1024">
		<title>terminal</title>
		<path class="path1" d="M0 64v896h1024v-896h-1024zM960 896h-896v-768h896v768zM896 192h-768v640h768v-640zM448 512h-64v64h-64v64h-64v-64h64v-64h64v-64h-64v-64h-64v-64h64v64h64v64h64v64zM704 640h-192v-64h192v64z"></path>
	</symbol>
	<symbol id="icon-mail" viewbox="0 0 1024 1024">
		<title>mail</title>
		<path class="path1" d="M512 960c-282.77 0-512-229.23-512-512s229.23-512 512-512 512 229.23 512 512-229.23 512-512 512zM256 704h512c9.138 0 18.004-1.962 26.144-5.662l-282.144-329.168-282.144 329.17c8.14 3.696 17.006 5.66 26.144 5.66zM192 256v384c0 1.34 0.056 2.672 0.14 4l187.664-218.942-185.598-185.598c-1.444 5.336-2.206 10.886-2.206 16.54zM768 192h-512c-5.654 0-11.202 0.762-16.54 2.208l182.118 182.118 90.422-105.498 90.424 105.494 182.116-182.12c-5.34-1.44-10.886-2.202-16.54-2.202zM832 256c0-5.654-0.762-11.2-2.206-16.54l-185.6 185.598 187.666 218.942c0.084-1.328 0.14-2.66 0.14-4v-384z"></path>
	</symbol>
	<symbol id="icon-github" viewBox="0 0 1024 1024">
		<title>github</title>
		<path class="path1" d="M512.008 12.642c-282.738 0-512.008 229.218-512.008 511.998 0 226.214 146.704 418.132 350.136 485.836 25.586 4.738 34.992-11.11 34.992-24.632 0-12.204-0.48-52.542-0.696-95.324-142.448 30.976-172.504-60.41-172.504-60.41-23.282-59.176-56.848-74.916-56.848-74.916-46.452-31.778 3.51-31.124 3.51-31.124 51.4 3.61 78.476 52.766 78.476 52.766 45.672 78.27 119.776 55.64 149.004 42.558 4.588-33.086 17.852-55.68 32.506-68.464-113.73-12.942-233.276-56.85-233.276-253.032 0-55.898 20.004-101.574 52.76-137.428-5.316-12.9-22.854-64.972 4.952-135.5 0 0 43.006-13.752 140.84 52.49 40.836-11.348 84.636-17.036 128.154-17.234 43.502 0.198 87.336 5.886 128.256 17.234 97.734-66.244 140.656-52.49 140.656-52.49 27.872 70.528 10.35 122.6 5.036 135.5 32.82 35.856 52.694 81.532 52.694 137.428 0 196.654-119.778 239.95-233.79 252.624 18.364 15.89 34.724 47.046 34.724 94.812 0 68.508-0.596 123.644-0.596 140.508 0 13.628 9.222 29.594 35.172 24.566 203.322-67.776 349.842-259.626 349.842-485.768 0-282.78-229.234-511.998-511.992-511.998z"></path>
	</symbol>
	<symbol id="icon-linkedin" viewBox="0 0 1024 1024">
		<title>linkedin</title>
		<path class="path1" d="M852 0h-680c-94.6 0-172 77.4-172 172v680c0 94.6 77.4 172 172 172h680c94.6 0 172-77.4 172-172v-680c0-94.6-77.4-172-172-172zM384 832h-128v-448h128v448zM320 320c-35.346 0-64-28.654-64-64s28.654-64 64-64 64 28.654 64 64-28.654 64-64 64zM832 832h-128v-256c0-35.346-28.654-64-64-64s-64 28.654-64 64v256h-128v-448h128v79.472c26.398-36.264 66.752-79.472 112-79.472 79.53 0 144 71.634 144 160v288z"></path>
	</symbol>
	</defs>
	</svg>
	
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-56490050-1', 'auto');
		ga('require', 'displayfeatures');		
		ga('send', 'pageview');
	</script>

</head>
<body>
	<div class="header">
		<div class="container">
			<div class="row">
				<div class="logo col-md-12 col-xs-12">
					<p>Nifty__<a href="http://niftyhedgehog.com"><img src="http://niftyhedgehog.com/images/hedgehog_drawing.png"></a></p>	
				</div>
			</div>
			<nav class="navbar navbar-static-top">
				<div class="container">
					<div class="navbar-header">
						<h4 class="navbar-active-page pull-left">Projects</h4>					
						<button type="button" class="navbar-toggle collapsed navbar-inverse" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
							<span class="sr-only">Toggle nav</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div id="navbar" class="navbar-collapse collapse">
						<ul class="nav navbar-nav">
							<li><a href="http://niftyhedgehog.com">Home</a></li>
							<li><a href="http://niftyhedgehog.com/about">About</a></li>
							<li class="active active-page"><a href="http://niftyhedgehog.com/projects">Projects</a></li>
							<li><a href="http://niftyhedgehog.com/blog">Blog</a></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 blog_image blog_title">
				<img src="http://niftyhedgehog.com/afternoon-cape/images/capes_display.jpg">
			</div>
			<div class="col-lg-8 col-lg-offset-2 blog_title">
				<h1>afternoon-cape</h1>
				<h3>A low-cost power monitoring (p.m. AKA "afternoon") cape for the BeagleBone Black.</h3>
				<p>by Hieu Minh Nguyen on   |  <a href="http://niftyhedgehog.com/index.html/#disqus_thread">Comment Count</a></p>
			</div>
			<div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 blog_post">
				<h1>afternoon-cape</h1>

<p>A Power Monitor (PM aka &quot;Afternoon&quot;) cape for the BeagleBone Black. The AfternoonCape utilizes the INA226 instrumentation amplifier to accurately sample and monitor voltage, current, and power consumption of a given supply.</p>

<p><img src="images/pmcape_board.jpg">
<img src="images/pmcape_lcd.jpg"></p>

<p>This repository contains:
- Altium library, schematic, and board files
- PCB gerbers and drill files
- Bill of materials
- Linux device driver for CD74HC4067, INA226, TMP441
- GUI source</p>

<p>Usage:
- loadmod afternoon-cape.ko EVM=am437xGP.txt
- Bash shell scripts using sysfs GPIO
- PMDC I2C protocol</p>

<p>Revision History:
- Alpha releases A1 (TI mux), A2 (ADI mux), A3 (discrete channel INAs)
- Beta releases B1 (TI mux)</p>

<p>A1:</p>

<p><img src="images/pmcape_A1_oshpark_top.png" width="350">
<img src="images/pmcape_A1_oshpark_bottom.png" width="350"></p>

<ul>
<li>MUX<em>SEL0 (P8, pin 12) - GPIO1</em>12 (0x44e10830, 0x30 offset, #44)</li>
<li>MUX<em>SEL1 (P9, pin 23) - GPIO1</em>17 (0x44e10844, 0x44 offset, #49)</li>
<li>MUX<em>SEL2 (P9, pin 27) - GPIO3</em>19 (0x44e109a4, 0x1a4 offset, #115)</li>
<li>MUX<em>SEL3 (P9, pin 12) - GPIO1</em>28 (0x44e10878, 0x78 offset, #60)</li>
<li>INA_42 handles channels 0 through 15</li>
<li>INA_43 handles channels 16 through 31</li>
<li>Accuracy +/- %</li>
</ul>

<p>A2:</p>

<p><img src="images/pmcape_A2_oshpark_top.png" width="350">
<img src="images/pmcape_A2_oshpark_bottom.png" width="350"></p>

<ul>
<li>MUX_SEL0 (P8, pin 12)</li>
<li>MUX_SEL1 (P9, pin 23)</li>
<li>MUX_SEL2 (P9, pin 27)</li>
<li>MUX_SEL3 (P9, pin 12)</li>
<li>INA_42 handles channels 0 through 15</li>
<li>INA_43 handles channels 16 through 31</li>
<li>Accuracy +/- %</li>
</ul>

<p>A3:</p>

<p><img src="images/pmcape_A3_oshpark_top.png" width="350">
<img src="images/pmcape_A3_oshpark_bottom.png" width="350"></p>

<ul>
<li>INA42-INA4F handles channels 0 through 11</li>
<li>Accuracy +/- %</li>
</ul>

<p>B1:</p>

<p><img src="images/pmcape_B1_oshpark_top.png" width="350">
<img src="images/pmcape_B1_oshpark_bottom.png" width="350"></p>

			</div>
			<div class="col-lg-8 col-lg-offset-2">
				
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'cheehieu'; 
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

			</div>
		</div>
	</div>
	<div class="footer footer-home">
		<h5>Find me on
			<a href="https://github.com/cheehieu"><svg class="icon icon-github"><use xlink:href="#icon-github"></use></svg></a>
			and
			<a href="https://www.linkedin.com/in/hieuminh"><svg class="icon icon-linkedin"><use xlink:href="#icon-linkedin"></use></svg></a>
		</h5>
		<!--div id="changetip_tipme_button" data-bid="PV5ADgwH5YWX5opUxrWcLQ" data-uid="mDtb3nGBZud7dRfdt4xG77"></div><script>(function(document,script,id){var js,r=document.getElementsByTagName(script)[0],protocol=/^http:/.test(document.location)?'http':'https';if(!document.getElementById(id)){js=document.createElement(script);js.id=id;js.src=protocol+'://widgets.changetip.com/public/js/widgets.js';r.parentNode.insertBefore(js,r)}}(document,'script','changetip_w_0'));</script-->
		<p>&copy; <?php echo date("Y"); ?> Crafted by HMN. All rights reserved.</p>
	</div>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="http://niftyhedgehog.com/javascripts/app.js"></script>
	<script src="http://niftyhedgehog.com/bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>
	<script src="http://niftyhedgehog.com/javascripts/ie10-viewport-bug-workaround.js"></script>
	
	<script type="text/javascript">
		var disqus_shortname = 'cheehieu';
		(function () {
			var s = document.createElement('script'); s.async = true;
			s.type = 'text/javascript';
			s.src = '//' + disqus_shortname + '.disqus.com/count.js';
			(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	}());
	</script>

</body>
</html>